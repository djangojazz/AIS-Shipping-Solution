<UserControl x:Class="CustomMapControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:ChartingDashboard"
             xmlns:bing="clr-namespace:Microsoft.Maps.MapControl.WPF;assembly=Microsoft.Maps.MapControl.WPF"
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
  <UserControl.Resources>
    <DataTemplate x:Key="ShipTemplate">
      <bing:MapLayer bing:MapLayer.Position="{Binding Location}">
        <Canvas>
          <Path Fill="{StaticResource brushBoatGradient}">
            <Path.Data>M77.644,44.329C76.305,44.329 75.222,45.412 75.22,46.749 75.222,48.084 76.305,49.17 77.644,49.17 78.977,49.17 80.064,48.084 80.066,46.749 80.063,45.412 78.977,44.329 77.644,44.329z M26.495,46.384C26.751,46.394,27.006,46.405,27.262,46.417L27.262,46.415C29.454,46.503,31.708,46.561,34.022,46.581L34.022,46.587C34.281,46.591,34.536,46.593,34.795,46.593L34.795,46.587C36.358,46.597,37.933,46.593,39.528,46.562L39.528,44.764 39.184,44.764 39.184,43.702 39.528,43.702 39.528,35.923 39.184,35.923 39.184,34.862 39.528,34.862 39.528,32.501 46.731,32.501 46.731,46.196C47.991,46.092,49.23,45.967,50.444,45.827L50.444,36.392 52.197,30.453 34.06,30.453 34.06,32.516 33.36,32.516 32.84,27.435 34.06,27.435 34.06,29.828 54.961,29.828 51.733,24.796 34.06,26.089 34.06,26.669 32.76,26.669 32.362,22.749 33.323,22.738 33.312,21.728C33.897,21.748 34.849,21.774 36.106,21.774 43.073,21.768 59.093,21.006 71.078,14.525L71.213,15.148 72.28,14.912 75.756,40.182C76.01,40.104,76.256,40.029,76.506,39.954L76.317,38.59 79.294,37.883 79.559,39.029C79.811,38.955,80.055,38.881,80.303,38.806L80.041,37.703 82.92,37.02 83.221,37.962C83.47,37.894,83.726,37.816,83.964,37.753L76.357,14.007 76.687,13.934C78.691,16.594 88.102,28.914 95.702,35.57 96.083,35.525 96.43,35.492 96.754,35.463 89.029,28.909 78.934,15.623 77.185,13.315L76.753,11.348 74.055,11.945 71.068,0 70.318,0.193 73.297,12.108 70.672,12.691 70.904,13.746C59.135,20.204 43.052,21.008 36.106,21.002 34.83,21.002 33.875,20.977 33.303,20.954L33.291,20.223 30.531,20.252 30.077,7.95 29.309,7.981 29.758,20.261 27.069,20.286 27.095,22.803 28.187,22.791 27.907,26.668 25.975,26.668 25.975,32.517 25.673,32.517 25.673,46.349C25.944,46.361,26.226,46.369,26.495,46.384L26.495,46.384z M48.126,31.663L50.818,31.663 49.337,35.695 48.126,35.695 48.126,31.663z M73.6,18.824L74.796,18.562 75.524,21.678 74.038,22.013 73.6,18.824z M74.146,22.774L75.694,22.428 76.419,25.543 74.58,25.964 74.146,22.774z M74.688,26.725L76.593,26.293 77.319,29.406 75.126,29.915 74.688,26.725z M75.668,33.866L75.23,30.679 77.494,30.157 78.22,33.266 75.668,33.866z M76.215,37.822L75.774,34.634 78.393,34.019 79.116,37.134 76.215,37.822z M82.683,36.288L79.867,36.956 79.145,33.843 81.709,33.24 82.683,36.288z M81.473,32.505L78.969,33.091 78.246,29.983 80.497,29.459 81.473,32.505z M80.259,28.721L78.071,29.233 77.345,26.121 79.287,25.677 80.259,28.721z M79.047,24.94L77.173,25.372 76.447,22.256 78.076,21.892 79.047,24.94z M77.833,21.159L76.273,21.506 75.548,18.396 76.861,18.108 77.833,21.159z M75.652,14.326L76.623,17.37 75.372,17.646 74.651,14.536 75.652,14.326z M73.896,14.695L74.622,17.808 73.494,18.055 73.053,14.872 73.896,14.695z M32.587,32.517L30.768,32.517 30.674,27.436 32.067,27.436 32.587,32.517z M31.606,22.911L31.992,26.669 30.662,26.669 30.582,22.911 31.606,22.911z M28.951,22.911L29.809,22.911 29.889,26.669 28.681,26.669 28.951,22.911z M28.627,27.437L29.872,27.437 29.872,32.518 28.26,32.518 28.627,27.437z M30.463,35.628C31.861,35.628 32.999,36.764 32.999,38.163 32.999,39.564 31.861,40.7 30.463,40.7 29.062,40.7 27.925,39.564 27.925,38.163 27.925,36.764 29.062,35.628 30.463,35.628z M27.854,27.437L27.491,32.518 26.746,32.518 26.746,27.437 27.854,27.437z M99.988,36.776C99.601,35.617 96.372,36.004 87.86,37.552 78.632,39.233 62.957,46.581 41.281,47.225 19.607,47.874 0,44.389 0,44.389L1.933,58.931C1.933,58.931 82.007,60.063 85.407,58.931 90.825,57.124 100.376,37.939 99.988,36.776z M8.61,56.25C6.12,56.25 4.113,54.234 4.113,51.756 4.113,49.267 6.119,47.255 8.61,47.255 11.091,47.255 13.105,49.267 13.105,51.756 13.104,54.238 11.091,56.25 8.61,56.25z M77.644,51.244C75.158,51.244 73.145,49.232 73.145,46.749 73.145,44.267 75.158,42.251 77.644,42.251 80.126,42.251 82.142,44.267 82.144,46.749 82.144,49.232 80.126,51.244 77.644,51.244z M8.61,49.329C7.274,49.333 6.191,50.417 6.188,51.756 6.191,53.089 7.274,54.172 8.61,54.178 9.943,54.172 11.026,53.087 11.029,51.756 11.026,50.417 9.943,49.333 8.61,49.329z M68.25,42.331L68.25,41.035 61.023,41.035 61.023,44.071C63.559,43.531,65.969,42.941,68.25,42.331z M40.014,44.764L40.014,46.55C40.435,46.542 40.855,46.53 41.282,46.519 42.979,46.468 44.625,46.367 46.251,46.236L46.245,32.984 40.014,32.984 40.014,34.863 41.188,34.863 41.188,35.924 40.014,35.924 40.014,43.703 41.188,43.703 41.188,44.765 40.014,44.765z M43.428,38.989L45.429,38.989 45.429,40.05 43.428,40.05 43.428,38.989z</Path.Data>
          </Path>
        </Canvas>
      </bing:MapLayer>
    </DataTemplate>
  </UserControl.Resources>
  <Border CornerRadius="15" Background="{StaticResource brushMainBoard}">
    <Border.BitmapEffect>
      <DropShadowBitmapEffect/>
    </Border.BitmapEffect>
    <Grid>
      <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*" />
      </Grid.RowDefinitions>
      <Label Grid.Row="0" x:Name="lblCustomMapHeader" Content="{local:SettingBinding MapLegend}" Foreground="{DynamicResource brushMainText}" HorizontalAlignment="Center" FontSize="20" FontWeight="Bold">
        <Label.BitmapEffect>
          <EmbossBitmapEffect/>
        </Label.BitmapEffect>
      </Label>
      <bing:Map Grid.Row="1" x:Name="map" CredentialsProvider="{StaticResource BingCredentials}" local:MapInteractivity.LocationRectangle="{Binding LocationRectangle}" Margin="5">
        <bing:MapItemsControl ItemsSource="{Binding ShipLocations}" ItemTemplate="{StaticResource ShipTemplate}" />
      </bing:Map>
    </Grid>
  </Border>
</UserControl>
